[
    {packet_purchaser, [
        {oui, 1},
        {pp_udp_worker, [{address, "127.0.0.1"}, {port, 1700}]},
        {pp_xor_filter_worker, false},
        {pp_integration, pp_integration_chirpstack},
        {pp_integration_chirpstack, [
            {endpoint, "http://localhost:8080"},
            {app_id, "1"},
            {api_key, "XXX"},
            {app_eui, "0000000000000000"}
        ]},
        {pp_console_api, [
            {endpoint, <<>>},
            {ws_endpoint, <<>>},
            {secret, <<>>},
            {auto_connect, false}
        ]},
        {update_from_ws_config, false},
        {sc_open_dc_amount, 100},
        {sc_expiration_interval, 25},
        {sc_expiration_buffer, 15},
        {pp_metrics_file, "/var/data/pp_metrics.dat"},
                        {pp_routing_config_filename, "/var/data/routing_config.json"},

        %% For Basic Auth
	%% {pp_listener_use_tls, false},
	%% {pp_listener_protocol_opts, [{port, 8080}]},
	%% {pp_auth_middleware, basic_auth_middleware}

        %% For TLS Auth
        {pp_listener_use_tls, true},
        {pp_auth_middleware, tls_auth_middleware},
        {pp_listener_protocol_opts, [
            {log_level, info},
            {port, 8443},
            {cacertfile, "/var/data/certs/trusted_ca_bundle.pem"},
            {certfile, "/var/data/certs/server.crt"},
            {keyfile, "/var/data/certs/server_decrypted.key"},
            {dhfile, "/var/data/certs/dhparams.pem"},
            {verify, verify_peer},
            {fail_if_no_peer_cert, true},
            {versions, ['tlsv1.2', 'tlsv1.1', 'tlsv1']},
            {ciphers, [
                "ECDHE-ECDSA-AES256-GCM-SHA384",
                "ECDHE-RSA-AES256-GCM-SHA384",
                "ECDHE-ECDSA-AES256-SHA384",
                "ECDHE-RSA-AES256-SHA384",
                "ECDHE-ECDSA-DES-CBC3-SHA",
                "ECDH-ECDSA-AES256-GCM-SHA384",
                "ECDH-RSA-AES256-GCM-SHA384",
                "ECDH-ECDSA-AES256-SHA384",
                "ECDH-RSA-AES256-SHA384",
                "DHE-DSS-AES256-GCM-SHA384",
                "DHE-DSS-AES256-SHA256",
                "AES256-GCM-SHA384",
                "AES256-SHA256",
                "ECDHE-ECDSA-AES128-GCM-SHA256",
                "ECDHE-RSA-AES128-GCM-SHA256",
                "ECDHE-ECDSA-AES128-SHA256",
                "ECDHE-RSA-AES128-SHA256",
                "ECDH-ECDSA-AES128-GCM-SHA256",
                "ECDH-RSA-AES128-GCM-SHA256",
                "ECDH-ECDSA-AES128-SHA256",
                "ECDH-RSA-AES128-SHA256",
                "DHE-DSS-AES128-GCM-SHA256",
                "DHE-DSS-AES128-SHA256",
                "AES128-GCM-SHA256",
                "AES128-SHA256",
                "ECDHE-ECDSA-AES256-SHA",
                "ECDHE-RSA-AES256-SHA",
                "DHE-DSS-AES256-SHA",
                "ECDH-ECDSA-AES256-SHA",
                "ECDH-RSA-AES256-SHA",
                "AES256-SHA",
                "ECDHE-ECDSA-AES128-SHA",
                "ECDHE-RSA-AES128-SHA",
                "DHE-DSS-AES128-SHA",
                "ECDH-ECDSA-AES128-SHA",
                "ECDH-RSA-AES128-SHA",
                "AES128-SHA"
            ]},
            {secure_renegotiate, true},
            {reuse_sessions, true},
            {honor_cipher_order, true},
            {max_connections, infinity}
        ]}
    ]},
    {blockchain, [
        {port, 2154},
        {seed_nodes, "/ip4/35.166.211.46/tcp/2154,/ip4/44.236.95.167/tcp/2154"},
        {base_dir, "/var/data"},
        {update_dir, "update"},
        {snap_source_base_url, "https://snapshots.helium.wtf/mainnet"},
        {fetch_latest_from_snap_source, true},
        {honor_quick_sync, true},
        {quick_sync_mode, blessed_snapshot},
        {blessed_snapshot_block_height, 1107361},
        {blessed_snapshot_block_hash,
            <<102, 50, 130, 227, 158, 34, 222, 243, 63, 229, 79, 170, 9, 0, 55, 18, 178, 248, 162,
                90, 67, 227, 209, 88, 69, 26, 24, 196, 243, 78, 117, 203>>},
        {sc_packet_handler, pp_sc_packet_handler},
        {disable_gateway_cache, true},
        {gw_cache_retention_limit, 0},
        {gw_context_cache_max_size, 0},
        {sc_sup_type, server},
        {sc_hook_close_submit, pp_sc_worker}
    ]},
    {libp2p, [
        {network, mainnet},
        {max_tcp_connections, 50000}
    ]},
    {prometheus, [
        {collectors, [
            prometheus_boolean,
            prometheus_counter,
            prometheus_gauge,
            prometheus_histogram,
            prometheus_vm_memory_collector,
            prometheus_vm_system_info_collector
        ]},
        {vm_system_info_collector_metrics, [process_count]}
    ]},
    {lager, [
        {suppress_supervisor_start_stop, true},
        {log_root, "/var/data/log"},
        {crash_log, "crash.log"},
        {handlers, [
            {lager_file_backend, [
                {file, "packet_purchaser.log"},
                {level, warning},
                {size, 1000000000},
                {date, "$D0"},
                {count, 15},
                {formatter_config, [
                    "[",
                    date,
                    " ",
                    time,
                    "] ",
                    pid,
                    " [",
                    severity,
                    "]",
                    {gateway_id, [" [", gateway_id, "]"], ""},
                    " [",
                    {module, ""},
                    {function, [":", function], ""},
                    {line, [":", line], ""},
                    "] ",
                    message,
                    "\n"
                ]}
            ]}
        ]},
        {traces, [
            {{lager_file_backend, "packet_purchaser.log"}, [{application, packet_purchaser}], info},
            {{lager_file_backend, "packet_purchaser.log"}, [{module, pp_sc_packet_handler}], info}
        ]}
    ]}
].
